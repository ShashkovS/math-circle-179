!function(){window.Conduit=new function(){function t(){$(this).addClass("mouseOver"),$(this).siblings(".pupilName").addClass("mouseOver"),$(this).closest("table").find(".headerRow").children(":nth-child("+(this.cellIndex+1)+")").addClass("mouseOver")}function o(){$(this).parent().addClass("mouseOver")}function s(){$(this).addClass("mouseOver"),$(this).closest("table").find("tr").children(":nth-child("+(this.cellIndex+1)+")").addClass("mouseOver")}function a(){$(this).closest("table").find("*").removeClass("mouseOver")}function e(t){var o=/(^[0-9]+)(?![0-9])(.*$)/.exec(t);return null===o||""===o[2]?t+"<br/>&nbsp;":o[1]+"<br/>"+o[2]}function n(t,o){$.ajax({type:"POST",url:"//www.shashkovs.ru/vmsh_test/c/FillConduit.php",data:{Class:1,List:o},dataType:"json",success:function(o){r(o,t)},error:function(o,s,a){t.removeAttr("data-loaded").toggleClass("nodisplay"),alert("Не удалось получить ответ от сервера: ")}})}function l(t){return t.length>3?"+":t}function r(n,r){var i,c,p,u,h,m=n.P,f=n.T,v=n.M,g=$('<table class="conduit"/>'),T=$("<colgroup/>"),w=$("<thead/>"),C=$("<tfoot/>"),b=$("<tbody/>");g.append(T,w,C,b),i=$('<tr class="headerRow"/>'),$("<td/>").appendTo(i),$("<col/>").appendTo(T);for(var k=1,y=f.length;k<y;k++)$('<th scope="col" class="problemName"/>').html(e(f[k].N)).hover(s,a).appendTo(i),p=$("<col/>",{"data-sign":f[k].S}),f[k].G!=u&&(u=f[k].G,p.addClass("problemStart")),p.appendTo(T);i.appendTo([w,C]);for(var _=0,O=m.length;_<O;_++){h=!1,c=$("<tr/>"),$('<th scope="row" class="pupilName"/>').html(m[_].S+" "+m[_].N).hover(o,a).appendTo(c);for(var k=1,y=f.length;k<y;k++)Mark=v[m[_].I+":"+f[k].I],void 0===Mark&&(Mark={T:""}),""!==Mark.T&&(h=!0),$("<td/>").html(l(Mark.T)).hover(t,a).appendTo(c);h&&c.appendTo(b)}r.empty(),g.appendTo(r),$('<img class="spooler_img" src="https://www.shashkovs.ru/vmsh_test/c/up.gif" alt=""/><span class="small_spooler conduit_spooler">Свернуть кондуит</span>').appendTo(r).on("click",d)}function d(){var t=$(this).closest(".lesson"),o=t.find(".conduit_container");o.toggleClass("nodisplay"),"true"!==o.attr("data-loaded")&&(o.attr("data-loaded","true"),n(o,t.attr("id")),$(document).unbind())}function i(){var t=$(this).closest(".lesson"),o=t.find(".solution_container");o.toggleClass("nodisplay"),"true"!==o.attr("data-loaded")&&(o.attr("data-loaded","true"),c(o,t.attr("id")))}function c(t,o){o.length<2&&(o="0"+o),$.ajax({type:"POST",url:"getdata.php",data:{Type:"solution",Number:o},dataType:"html",cache:!0,success:function(o){t.html(o),$('<img class="spooler_img" src="//www.shashkovs.ru/vmsh_test/c/up.gif" alt=""/><span class="small_spooler solution_spooler">Свернуть решения</span>').appendTo(t).on("click",i)},error:function(o,s,a){t.removeAttr("data-loaded").toggleClass("nodisplay"),alert("Не удалось загрузить файл с сервера.")}})}this.init=function(){$(".conduit_spooler").on("click",d),$(".solution_spooler").on("click",i)}}}();